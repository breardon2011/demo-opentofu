auto_merge: true
auto_merge_strategy: "merge"

# projects:
#   - name: dev
#     dir: dev/
#   - name: prod
#     dir: prod/
#   - name: prod11
#     dir: prod/
#   - name: prod12
#     dir: prod/


generate_projects:
  include: "**"
  terragrunt: true
  terragrunt_parsing:
    createProjectName: true
    projectAliasDelimiter: "#" 
    autoPlan: true
    autoMerge: false
    parallel: true
    defaultWorkflow: "default"
    cascadeDependencies: true
    createWorkspace: true

workflows:
  default:
    plan:
      steps:
        - init
        - run: terraform plan -input=false -refresh -no-color -out $DIGGER_PLANFILE
        # - run: infracost breakdown --path=. | tee -a $DIGGER_OUT

